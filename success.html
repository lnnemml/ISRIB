<!doctype html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SMCGZ6BPDC"></script>
<script src="/js/gtag.js"></script>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Thank you â€” ISRIB.shop</title>
  <meta name="robots" content="noindex,follow"/>
  <meta name="description" content="Thank you for your request. Weâ€™ll reply shortly with payment and shipping details.">

  <!-- Canonical / Open Graph -->
  <link rel="canonical" href="https://isrib.shop/success.html"/>
  <meta property="og:title" content="Thank you â€” ISRIB.shop"/>
  <meta property="og:description" content="We received your request and will get back to you shortly."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://isrib.shop/success.html"/>
  <meta property="og:image" content="images/og-cover.jpg"/>
  <!-- Favicon & App Icons -->
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="manifest" href="/images/site.webmanifest">
<link rel="shortcut icon" href="/images/favicon.ico">
<meta name="theme-color" content="#ffffff">


  <link rel="stylesheet" href="css/styles.css?v=19"/>
  <style>
    .success-hero{background:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%);padding:60px 0 40px;text-align:center;position:relative}
    .success-hero::before{content:'';position:absolute;inset:0;background:
      radial-gradient(circle at 18% 82%, rgba(30,64,175,.10) 0%, transparent 50%),
      radial-gradient(circle at 84% 18%, rgba(14,165,233,.10) 0%, transparent 50%)}
    .success-hero .title{position:relative;z-index:1;font-weight:900;font-size:clamp(2.1rem,4.5vw,3.2rem);color:#1e293b;margin:0 0 10px}
    .success-hero .sub{position:relative;z-index:1;color:#64748b;font-size:1.05rem;max-width:760px;margin:0 auto}
    .success-section{padding:28px 0 70px}.success-section .container{max-width:820px}
    .lead{opacity:.9}.req-summary h2{font-size:1.1rem;margin:0 0 .75rem}.req-summary ul{list-style:none;padding:0;margin:0}
    .next-steps ol{margin:0;padding-left:1.25rem}
  </style>
</head>
<body>

<header class="header-slim site-header" id="siteHeader">
  <div class="container">
    <div class="header-content">
      <a href="/" class="logo-slim" aria-label="ISRIB.shop home">
        <img src="images/logo-dark-trimmed.png" alt="ISRIB.shop Logo" class="logo-image-slim"/>
      </a>
      <nav class="nav-slim" aria-label="Primary">
        <a href="products.html">Products</a>
        <a href="about.html">About</a>
        <a href="faq.html">FAQ</a>
        <a href="contact.html">Contact</a>
        <a href="checkout.html" class="cart-btn-slim" id="cartBtn">ğŸ§º <span>Cart</span> <span id="cartCount" class="badge-slim">0</span></a>
      </nav>
      <button class="burger" id="burgerBtn" aria-label="Open menu" aria-expanded="false" aria-controls="mobileMenu">
        <svg class="burger-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
          <path d="M4 7h16M4 12h16M10 17h10"/>
        </svg>
      </button>
      <nav class="mobile-menu" id="mobileMenu" data-nav aria-label="Mobile">
        <a href="products.html" class="mm-link">Products</a>
        <a href="about.html" class="mm-link">About</a>
        <a href="faq.html" class="mm-link">FAQ</a>
        <a href="contact.html" class="mm-link">Contact</a>
        <a href="checkout.html" class="mm-link mm-cart">ğŸ§º Cart <span id="cartCountMobile" class="mm-badge">0</span></a>
      </nav>
    </div>
  </div>
</header>

<section class="success-hero">
  <div class="container">
    <h1 class="title">Thank you! ğŸ‰</h1>
    <p class="sub">Weâ€™ve received your request. Weâ€™ll reply shortly with payment & shipping instructions.</p>
  </div>
</section>

<main class="success-section">
  <div class="container">
    <section class="card">
      <div class="card-body">
        <div id="summary" class="card req-summary" style="margin:1rem 0 1.25rem; display:none;">
          <div class="card-body">
            <h2>Request summary</h2>
            
            <!-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ² -->
            <table style="width:100%; border-collapse:collapse; margin-bottom:1rem;">
              <thead>
                <tr style="border-bottom:1px solid #e5e7eb;">
                  <th style="text-align:left; padding:0.5rem;">Product</th>
                  <th style="text-align:center; padding:0.5rem;">Pack</th>
                  <th style="text-align:center; padding:0.5rem;">Packs</th>
                  <th style="text-align:right; padding:0.5rem;">Price</th>
                </tr>
              </thead>
              <tbody id="s-items-tbody">
                <!-- Ğ‘ÑƒĞ´Ğµ Ğ·Ğ°Ğ¿Ğ¾Ğ²Ğ½ĞµĞ½Ğ¾ JS -->
              </tbody>
            </table>

            <hr class="sep" style="margin:0.85rem 0;">
            <div class="sum-line"><span>Subtotal</span> <b id="s-subtotal">â€”</b></div>
            <div class="sum-line"><span>Shipping</span> <b>FREE</b></div>
            <div class="sum-line grand"><span>Total</span> <b id="s-total">â€”</b></div>
            <div class="sum-note" style="color:#64748b;margin-top:.35rem;">* Free shipping â€” limited-time launch offer.</div>
          </div>
        </div>

        <div class="back-actions" style="display:flex;justify-content:center;gap:.75rem;flex-wrap:wrap;margin-top:.5rem;">
          <a class="btn" href="index.html" onclick="trackCTA?.('success','home')">Home</a>
          <a class="btn btn-secondary" href="products.html" onclick="trackCTA?.('success','products')">Catalog</a>
          <a class="btn btn-outline" href="contact.html" onclick="trackCTA?.('success','contact')">Send another request</a>
        </div>

        <hr class="sep" style="margin:1.5rem 0;">

        <div class="next-steps">
          <h2 style="font-size:1.05rem;margin-bottom:.5rem;">What's next?</h2>
          <ol>
            <li>Check your email â€” you'll get our reply soon.</li>
            <li>If you don't see our message, check the Spam folder or contact us again.</li>
          </ol>
        </div>
      </div>
    </section>
  </div>
</main>

 <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>ISRIB Shop</h3>
          <p>Advanced research chemicals for scientific advancement. Trusted by researchers worldwide for quality and reliability.</p>
          <p><strong>Email:</strong> isrib.shop@protonmail.com</p>
        </div>
        <div class="footer-section">
          <h3>Products</h3>
          <ul>
            <li><a href="product_isrib_A15.html">ISRIB-A15</a></li>
            <li><a href="product_isrib.html">ISRIB Original</a></li>
            <li><a href="product_zzl_7.html">ZZL-7</a></li>
            <li><a href="product_MPEP.html">MPEP Oxalate</a></li>
            <li><a href="products.html">All Products</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Information</h3>
          <ul>
            <li><a href="about.html">About Us</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="quality.html">Quality Control</a></li>
            <li><a href="safety.html">Safety Guidelines</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Legal</h3>
          <ul>
            <li><a href="terms.html">Terms of Service</a></li>
            <li><a href="privacy.html">Privacy Policy</a></li>
            <li><a href="research.html">Research Use Only</a></li>
            <li><a href="disclaimer.html">Disclaimer</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 ISRIB Shop. All rights reserved. | Research chemicals for laboratory use only.</p>
      </div>
    </div>
  </footer>

<!-- App JS -->
<script src="js/main.js?v=34"></script>
<script>
(function() {
  console.log('[SUCCESS] Script started');
  
  // ğŸ¯ Ğ§Ğ˜Ğ¢ĞĞ„ĞœĞ Ğ”ĞĞĞ† Ğ— SESSIONSTORAGE
  let orderData = null;
  
  try {
    const stored = sessionStorage.getItem('order_success');
    console.log('[SUCCESS] SessionStorage data:', stored);
    
    if (stored) {
      orderData = JSON.parse(stored);
      console.log('[SUCCESS] Parsed order data:', orderData);
      
      // ĞÑ‡Ğ¸Ñ‰Ğ°Ñ”Ğ¼Ğ¾ Ğ¿Ñ–ÑĞ»Ñ Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ
      sessionStorage.removeItem('order_success');
    }
  } catch (e) {
    console.error('[SUCCESS] Failed to parse sessionStorage:', e);
  }
  
  // Fallback: ÑĞ¿Ñ€Ğ¾Ğ±ÑƒÑ”Ğ¼Ğ¾ Ğ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ñ‚Ğ¸ Ğ· URL (ÑĞºÑ‰Ğ¾ sessionStorage Ğ½Ğµ ÑĞ¿Ñ€Ğ°Ñ†ÑĞ²Ğ°Ğ²)
  if (!orderData) {
    console.log('[SUCCESS] Trying URL params as fallback...');
    const q = new URLSearchParams(location.search);
    
    try {
      const itemsParam = q.get('items');
      const items = itemsParam ? JSON.parse(itemsParam) : [];
      
      if (items.length > 0) {
        orderData = {
          order_id: q.get('order_id') || 'ORD-' + Date.now(),
          subtotal: parseFloat(q.get('subtotal') || '0'),
          discount: parseFloat(q.get('discount') || '0'),
          promo: q.get('promo') || '',
          total: parseFloat(q.get('total') || '0'),
          items: items
        };
        console.log('[SUCCESS] Fallback order data from URL:', orderData);
      }
    } catch (e) {
      console.error('[SUCCESS] URL fallback failed:', e);
    }
  }
  
  // Ğ¯ĞºÑ‰Ğ¾ Ğ½ĞµĞ¼Ğ°Ñ” Ğ´Ğ°Ğ½Ğ¸Ñ… â€” Ğ²Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾
  if (!orderData || !orderData.items || orderData.items.length === 0) {
    console.warn('[SUCCESS] âš ï¸ No order data found');
    return;
  }
  
  const { order_id, subtotal, discount, promo, total, items } = orderData;
  
  console.log('[SUCCESS] Order details:', {
    orderId: order_id,
    total: total,
    items: items.length
  });
  
  const fmtUSD = (n) => '$' + (Number(n || 0)).toFixed(2);
  
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Ğ Ğ•ĞĞ”Ğ•Ğ Ğ˜ĞœĞ UI
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  console.log('[SUCCESS] Rendering order summary');
  const box = document.getElementById('summary');
  if (box) box.style.display = 'block';
  
  const tbody = document.getElementById('s-items-tbody');
  if (tbody) {
    tbody.innerHTML = items.map(item => `
      <tr style="border-bottom:1px solid #f3f4f6;">
        <td style="padding:0.5rem;">${item.name}</td>
        <td style="text-align:center; padding:0.5rem;">${item.display || ''}</td>
        <td style="text-align:center; padding:0.5rem;">${item.qty}</td>
        <td style="text-align:right; padding:0.5rem;">${fmtUSD(item.price)}</td>
      </tr>
    `).join('');
  }
  
  const set = (id, val) => { 
    const el = document.getElementById(id); 
    if (el) el.textContent = val; 
  };
  
  set('s-subtotal', fmtUSD(subtotal));
  set('s-total', fmtUSD(total));
  
  if (discount > 0 && promo) {
    const allSumLines = box.querySelectorAll('.sum-line');
    let shippingLine = null;
    allSumLines.forEach(line => {
      if (line.textContent.includes('Shipping') || line.textContent.includes('FREE')) {
        shippingLine = line;
      }
    });
    
    if (shippingLine) {
      const discountLine = document.createElement('div');
      discountLine.className = 'sum-line';
      discountLine.style.color = '#10b981';
      discountLine.innerHTML = `<span>Discount (${promo})</span> <b>âˆ’${fmtUSD(discount)}</b>`;
      shippingLine.parentNode.insertBefore(discountLine, shippingLine);
    }
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // âœ… PURCHASE EVENT
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function sendPurchaseEvent() {
    console.log('[GA4] Attempting to send purchase event...');
    
    if (items.length === 0) {
      console.warn('[GA4] âš ï¸ No items in order');
      return;
    }
    
    if (total <= 0) {
      console.warn('[GA4] âš ï¸ Invalid total:', total);
      return;
    }

    try {
      const ga4Items = items.map(item => ({
        item_id: item.sku || 'unknown',
        item_name: item.name || 'Unknown Product',
        quantity: Number(item.qty) || 1,
        price: Number(item.price) || 0,
        item_variant: item.display || '',
        item_category: 'Research Chemicals'
      }));

      console.log('[GA4] Prepared items:', ga4Items);

      // ĞœĞµÑ‚Ğ¾Ğ´ 1: Ñ‡ĞµÑ€ĞµĞ· gtag
      if (typeof gtag === 'function') {
        console.log('[GA4] Sending via gtag...');
        gtag('event', 'purchase', {
          transaction_id: order_id,
          value: total,
          currency: 'USD',
          shipping: 0,
          tax: 0,
          coupon: promo || undefined,
          items: ga4Items
        });
        
        console.log('[GA4] âœ… Purchase sent via gtag:', {
          transaction_id: order_id,
          value: total,
          items: ga4Items.length
        });
      } else {
        console.error('[GA4] âŒ gtag function not available');
      }

      // ĞœĞµÑ‚Ğ¾Ğ´ 2: Ñ‡ĞµÑ€ĞµĞ· dataLayer
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        event: 'purchase',
        ecommerce: {
          transaction_id: order_id,
          value: total,
          currency: 'USD',
          tax: 0,
          shipping: 0,
          coupon: promo || '',
          items: ga4Items
        }
      });
      
      console.log('[GA4] âœ… Purchase sent via dataLayer');

    } catch (e) {
      console.error('[GA4] âŒ Purchase event error:', e);
    }
  }

  // Ğ’Ğ¸ĞºĞ¾Ğ½ÑƒÑ”Ğ¼Ğ¾ Ğ¿Ñ–ÑĞ»Ñ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ
  console.log('[GA4] Waiting for page load...');
  
  if (document.readyState === 'complete') {
    console.log('[GA4] Page already loaded, sending immediately');
    setTimeout(sendPurchaseEvent, 1000);
  } else {
    window.addEventListener('load', function() {
      console.log('[GA4] Page loaded, sending purchase');
      setTimeout(sendPurchaseEvent, 1000);
    });
  }

})();
</script>
<!-- Tawk.to chat (lazy) -->
<script>
  (function () {
    var loaded = false;
    function loadTawk(){
      if (loaded) return; loaded = true;
      var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
      s1.async = true;
      s1.src = "https://embed.tawk.to/68d0f6a789c2a719288962de/1j5o46vrj";
      s1.charset = "UTF-8";
      s1.setAttribute("crossorigin","*");
      s0.parentNode.insertBefore(s1, s0);
    }
    window.addEventListener("load", function(){ setTimeout(loadTawk, 1500); });
    ["mousemove","scroll","keydown","touchstart"].forEach(function(evt){
      window.addEventListener(evt, loadTawk, { once:true, passive:true });
    });
  })();
</script>

</body>
</html>
