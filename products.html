<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Products ‚Äì ISRIB.shop</title>
  <meta name="description" content="Research-grade chemical catalog: ISRIB A15, ISRIB Original, ZZL-7, MPEP Oxalate." />
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="icon" href="images/favicon-32.png" type="image/png" />
  <style>
    /* –ª–µ–≥–∫—ñ –ø—ñ–¥—Å–∏–ª–µ–Ω–Ω—è —Å—Ç–∏–ª—ñ–≤ –∫–∞—Ä—Ç–æ–∫ (–ø—Ä–∞—Ü—é—î –ø–æ–≤–µ—Ä—Ö styles.css) */
    .products-hero { padding: 36px 0 8px; }
    .grid { display:grid; gap:24px; grid-template-columns:repeat(3,minmax(0,1fr)); }
    @media (max-width: 1024px){ .grid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
    @media (max-width: 720px){ .grid{ grid-template-columns:1fr; } }

    .product-card{
      position:relative;
      background:#fff; border-radius:16px; border:1px solid #e5e7eb;
      box-shadow: 0 4px 20px rgba(0,0,0,.04);
      padding:20px; display:flex; flex-direction:column; gap:16px;
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }
    .product-card.linkable{ cursor:pointer; }
    .product-card.linkable:hover{
      transform: translateY(-4px);
      box-shadow: 0 12px 28px rgba(0,0,0,.10);
      border-color:#c7d2fe;
    }

    .product-header{ display:flex; align-items:center; gap:12px; }
    .product-title{ font-weight:800; font-size:1.1rem; color:#0f172a; }
    .product-sub{ color:#64748b; font-size:.94rem; }

    .quantity-wrap{ border:1px solid #e5e7eb; border-radius:14px; padding:14px; }
    .quantity-title{ font-weight:700; margin-bottom:10px; color:#0f172a; }
    .quantity-row{ display:flex; gap:10px; flex-wrap:wrap; }
    .quantity-option{
      border:2px solid #e2e8f0; border-radius:12px; padding:10px 14px; cursor:pointer; user-select:none; background:#fff; transition:transform .08s ease, border-color .18s ease, box-shadow .18s ease;
    }
    .quantity-option:active{ transform:scale(.98); }
    .quantity-option .tag { display:block; font-weight:800; color:#0f172a; }
    .quantity-option .price { display:block; color:#64748b; font-size:.9rem; }
    .quantity-option.active{ border-color:#2563eb; box-shadow:0 0 0 4px rgba(37,99,235,.08); }

    .facts{ background:#f8fafc; border:1px solid #e5e7eb; border-radius:12px; padding:12px 14px; font-size:.95rem; color:#334155; }
    .facts .row{ display:flex; justify-content:space-between; gap:12px; padding:6px 0; border-bottom:1px dashed #e5e7eb; }
    .facts .row:last-child{ border-bottom:0; }
    .facts .val{ font-weight:700; }

    .product-footer{ display:flex; align-items:center; gap:10px; margin-top:auto; }
    .btn-primary{ background:#1e40af; border-radius:12px; padding:12px 18px; color:#fff; font-weight:800; border:0; cursor:pointer; }
    .view-product{ border-radius:12px; padding:12px 18px; font-weight:700; border:1px solid #e5e7eb; color:#0f172a; background:#fff; }
    .view-cart{ margin-left:auto; color:#1e40af; font-weight:800; }

    .price-line{ font-size:1.15rem; font-weight:800; color:#0f172a; }
    .price-line small{ color:#64748b; font-weight:600; }

    /* -------- cart badge pop‚Äëin -------- */
    .cart-btn{ position:relative; display:inline-flex; align-items:center; gap:6px; }
    .badge{
      display:inline-flex; align-items:center; justify-content:center;
      min-width:22px; height:22px; padding:0 6px;
      background:#1e40af; color:#fff; border-radius:12px; font-size:12px; font-weight:800;
      transform-origin:center; line-height:1; border:1px solid rgba(0,0,0,.06);
    }
    @keyframes pop { 0% {transform:scale(1);} 40% {transform:scale(1.22);} 100% {transform:scale(1);} }
    .badge.pop { animation: pop .35s cubic-bezier(.2,.8,.2,1); }

    /* -------- shake –¥–ª—è –∫–Ω–æ–ø–∫–∏/–ª—ñ–Ω–∫–∞ –∫–æ—à–∏–∫–∞ -------- */
    @keyframes shake {
      0%,100% { transform: translateX(0); }
      20% { transform: translateX(-2px); }
      40% { transform: translateX(2px); }
      60% { transform: translateX(-1px); }
      80% { transform: translateX(1px); }
    }
    .shake { animation: shake .45s ease; }

    /* -------- toast (top-right) -------- */
    .toast-wrap{
      position:fixed; top:16px; right:16px; z-index:9999;
      display:flex; flex-direction:column; gap:10px; pointer-events:none;
    }
    .toast{
      background:#0b1220; color:#e7eefc; border:1px solid #1f2a44;
      border-radius:12px; padding:12px 14px; font-weight:600; min-width:240px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      display:flex; align-items:center; gap:10px; opacity:0; transform:translateY(-8px);
      animation: toast-in .22s ease forwards, toast-out .22s ease forwards 1.5s;
    }
    .toast svg{ flex:0 0 auto }
    @keyframes toast-in { to { opacity:1; transform: translateY(0); } }
    @keyframes toast-out{ to { opacity:0; transform: translateY(-8px); } }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <a href="/" class="logo">
          <img src="images/logo-dark-trimmed.png" alt="ISRIB.shop Logo" class="logo-image" width="180" height="40" style="object-fit:contain" />
        </a>
        <nav class="nav">
          <a href="products.html" aria-current="page">Products</a>
          <a href="about.html">About</a>
          <a href="faq.html">FAQ</a>
          <a href="contact.html">Contact</a>
          <a href="checkout.html" class="cart-btn" id="cartBtn">
            üõí Cart <span id="cartCount" class="badge">0</span>
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Page -->
  <main>
    <section class="products-hero">
      <div class="container">
        <h1>ISRIB Shop Products</h1>
        <p class="muted">Research‚Äëgrade chemical catalog ‚Ä¢ 98%+ Purity ‚Ä¢ Worldwide Shipping</p>
      </div>
    </section>

    <section>
      <div class="container">
        <div class="grid">

          <!-- A15 -->
          <article class="product-card linkable" data-sku="isrib-a15" data-name="ISRIB A15">
            <div class="product-header">
              <h2 class="product-title">ISRIB A15</h2>
              <span class="product-sub">Ultra Potent Analog</span>
            </div>

            <div class="quantity-wrap">
              <div class="quantity-title">Select Quantity</div>
              <div class="quantity-row">
                <div class="quantity-option active" data-quantity="100mg" data-price="50"><span class="tag">100mg</span><span class="price">$50</span></div>
                <div class="quantity-option" data-quantity="500mg" data-price="130"><span class="tag">500mg</span><span class="price">$130</span></div>
                <div class="quantity-option" data-quantity="1g" data-price="200"><span class="tag">1000mg</span><span class="price">$200</span></div>
              </div>
            </div>

            <div class="facts">
              <div class="row"><span>Selected:</span><span class="val selected-quantity">100mg</span></div>
              <div class="row"><span>Purity:</span><span class="val">‚â•98% HPLC</span></div>
              <div class="row"><span>COA:</span><span class="val">Included</span></div>
            </div>

            <div class="price-line">
              <span class="current-price">$50.00</span>
              <small class="price-per-mg">($0.50/mg)</small>
            </div>

            <div class="product-footer">
              <a class="view-product" href="product_isrib_A15.html">View Details</a>
              <button class="btn-primary add-btn" data-sku="isrib-a15" data-name="ISRIB A15">
                ‚ûï Add to Cart ‚Äî <span class="add-label">100mg</span> <span class="add-price">$50</span>
              </button>
              <a class="view-cart" href="checkout.html">View Cart</a>
            </div>
          </article>

          <!-- ISRIB Original -->
          <article class="product-card linkable" data-sku="isrib" data-name="ISRIB (Original)">
            <div class="product-header">
              <h2 class="product-title">ISRIB (Original)</h2>
              <span class="product-sub">Original Compound</span>
            </div>

            <div class="quantity-wrap">
              <div class="quantity-title">Select Quantity</div>
              <div class="quantity-row">
                <div class="quantity-option active" data-quantity="30mg" data-price="14"><span class="tag">30mg</span><span class="price">$14</span></div>
                <div class="quantity-option" data-quantity="100mg" data-price="27"><span class="tag">100mg</span><span class="price">$27</span></div>
                <div class="quantity-option" data-quantity="1g" data-price="100"><span class="tag">1000mg</span><span class="price">$100</span></div>
              </div>
            </div>

            <div class="facts">
              <div class="row"><span>Selected:</span><span class="val selected-quantity">30mg</span></div>
              <div class="row"><span>Purity:</span><span class="val">‚â•98% HPLC</span></div>
              <div class="row"><span>COA:</span><span class="val">Included</span></div>
            </div>

            <div class="price-line">
              <span class="current-price">$14.00</span>
              <small class="price-per-mg">($0.47/mg)</small>
            </div>

            <div class="product-footer">
              <a class="view-product" href="product_isrib.html">View Details</a>
              <button class="btn-primary add-btn" data-sku="isrib" data-name="ISRIB (Original)">
                ‚ûï Add to Cart ‚Äî <span class="add-label">30mg</span> <span class="add-price">$14</span>
              </button>
              <a class="view-cart" href="checkout.html">View Cart</a>
            </div>
          </article>

          <!-- ZZL-7 -->
          <article class="product-card linkable" data-sku="zzl7" data-name="ZZL-7">
            <div class="product-header">
              <h2 class="product-title">ZZL‚Äë7</h2>
              <span class="product-sub">Fast-Onset Antidepressant</span>
            </div>

            <div class="quantity-wrap">
              <div class="quantity-title">Select Quantity</div>
              <div class="quantity-row">
                <div class="quantity-option active" data-quantity="100mg" data-price="50"><span class="tag">100mg</span><span class="price">$50</span></div>
                <div class="quantity-option" data-quantity="500mg" data-price="130"><span class="tag">500mg</span><span class="price">$130</span></div>
                <div class="quantity-option" data-quantity="1g" data-price="200"><span class="tag">1000mg</span><span class="price">$200</span></div>
              </div>
            </div>

            <div class="facts">
              <div class="row"><span>Selected:</span><span class="val selected-quantity">100mg</span></div>
              <div class="row"><span>Purity:</span><span class="val">‚â•98% HPLC</span></div>
              <div class="row"><span>COA:</span><span class="val">Included</span></div>
            </div>

            <div class="price-line">
              <span class="current-price">$50.00</span>
              <small class="price-per-mg">($0.50/mg)</small>
            </div>

            <div class="product-footer">
              <a class="view-product" href="product_zzl_7.html">View Details</a>
              <button class="btn-primary add-btn" data-sku="zzl7" data-name="ZZL-7">
                ‚ûï Add to Cart ‚Äî <span class="add-label">100mg</span> <span class="add-price">$50</span>
              </button>
              <a class="view-cart" href="checkout.html">View Cart</a>
            </div>
          </article>

          <!-- MPEP Oxalate -->
          <article class="product-card linkable" data-sku="mpep" data-name="MPEP Oxalate">
            <div class="product-header">
              <h2 class="product-title">MPEP Oxalate</h2>
              <span class="product-sub">mGluR5 Negative Allosteric Modulator</span>
            </div>

            <div class="quantity-wrap">
              <div class="quantity-title">Select Quantity</div>
              <div class="quantity-row">
                <div class="quantity-option active" data-quantity="50mg" data-price="45"><span class="tag">50mg</span><span class="price">$45</span></div>
                <div class="quantity-option" data-quantity="500mg" data-price="280"><span class="tag">500mg</span><span class="price">$280</span></div>
                <div class="quantity-option" data-quantity="1g" data-price="450"><span class="tag">1000mg</span><span class="price">$450</span></div>
              </div>
            </div>

            <div class="facts">
              <div class="row"><span>Selected:</span><span class="val selected-quantity">50mg</span></div>
              <div class="row"><span>Purity:</span><span class="val">‚â•98% HPLC</span></div>
              <div class="row"><span>COA:</span><span class="val">Included</span></div>
            </div>

            <div class="price-line">
              <span class="current-price">$45.00</span>
              <small class="price-per-mg">($0.90/mg)</small>
            </div>

            <div class="product-footer">
              <a class="view-product" href="product_MPEP.html">View Details</a>
              <button class="btn-primary add-btn" data-sku="mpep" data-name="MPEP Oxalate">
                ‚ûï Add to Cart ‚Äî <span class="add-label">50mg</span> <span class="add-price">$45</span>
              </button>
              <a class="view-cart" href="checkout.html">View Cart</a>
            </div>
          </article>

        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div>¬© <span id="y"></span> ISRIB.shop ‚Äî Research use only.</div>
      </div>
    </div>
  </footer>

  <!-- Toast container -->
  <div class="toast-wrap" id="toastWrap" aria-live="polite" aria-atomic="true"></div>

  <!-- –¢–≤—ñ–π –≥–ª–æ–±–∞–ª—å–Ω–∏–π JS -->
  <script src="js/main.js"></script>

  <!-- –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π ‚Äú–∫–ª–µ–π‚Äù –¥–ª—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ Products -->
  <script>
    (function () {
      const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));
      const $  = (s, r = document) => r.querySelector(s);
      const CART_KEY = 'isrib_cart';
      const badge = $('#cartCount');
      const cartBtn = $('#cartBtn');
      document.getElementById('y').textContent = new Date().getFullYear();

      // --- utils ---
      const toGrams = (q) => {
        q = String(q).trim().toLowerCase();
        if (q.endsWith('mg')) return Number(q.replace('mg','')) / 1000;
        if (q.endsWith('g'))  return Number(q.replace('g',''));
        return Number(q) || 1;
      };

      function showToast(message){
        const wrap = $('#toastWrap'); if(!wrap) return;
        const el = document.createElement('div');
        el.className = 'toast';
        el.innerHTML = `
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M9 12l2 2 4-4" stroke="#31c48d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="12" r="9" stroke="#31c48d" stroke-width="2" fill="none"/>
          </svg>
          <span>${message}</span>`;
        wrap.appendChild(el);
        setTimeout(()=> wrap.removeChild(el), 1750);
      }

      function shakeCart(){
        if(!cartBtn) return;
        cartBtn.classList.remove('shake'); void cartBtn.offsetWidth;
        cartBtn.classList.add('shake');
        setTimeout(()=>cartBtn.classList.remove('shake'), 500);
      }

      function popBadge(){
        if (!badge) return;
        badge.classList.remove('pop'); void badge.offsetWidth; // restart animation
        badge.classList.add('pop');
      }

      function getCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); }catch{ return []; } }
      function saveCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); updateCartCount(); }

      function updateCartCount(){
        if (!badge) return;
        let cart = getCart();
        // –º—ñ–≥—Ä–∞—Ü—ñ—è (—Å—Ç–∞—Ä—ñ –∑–∞–ø–∏—Å–∏ –º–æ–≥–ª–∏ –º–∞—Ç–∏ qty –∑–∞–º—ñ—Å—Ç—å grams/count)
        cart = cart.map(i => (i && i.count == null && (i.qty != null || i.grams != null))
          ? ({...i, grams: i.grams ?? i.qty, count: 1, unit:'pack', qty: undefined})
          : i);
        const total = cart.reduce((n,i) => n + (Number(i.count)||0), 0);
        badge.textContent = total;
      }

      const updateCard = (card) => {
        const sel = $('.quantity-option.active', card);
        if (!sel) return;
        const q = sel.dataset.quantity;
        const price = Number(sel.dataset.price);

        const selectedOut = $('.selected-quantity', card);
        if (selectedOut) selectedOut.textContent = q;

        const currentPrice = $('.current-price', card);
        if (currentPrice) currentPrice.textContent = `$${price.toFixed(2)}`;

        const ppm = $('.price-per-mg', card);
        if (ppm) {
          const mg = q.endsWith('mg') ? Number(q.replace('mg','')) : Number(q.replace('g','')) * 1000;
          ppm.textContent = `($${(price / mg).toFixed(2)}/mg)`;
        }

        const label = $('.add-label', card);
        const priceEl = $('.add-price', card);
        if (label) label.textContent = q;
        if (priceEl) priceEl.textContent = `$${price}`;
      };

      // --- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–∞—Ä—Ç–æ–∫ + selection ---
      $$('.product-card').forEach((card) => {
        const first = $('.quantity-option', card);
        if (first && !$('.quantity-option.active', card)) first.classList.add('active');

        $$('.quantity-option', card).forEach(opt => {
          // –Ω–µ –≤—ñ–¥–¥–∞–≤–∞—Ç–∏ –∫–ª—ñ–∫ –Ω–∞–≥–æ—Ä—É (—â–æ–± –Ω–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É–≤–∞–ª–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –∫–∞—Ä—Ç–∫–∏)
          opt.addEventListener('click', (e) => {
            e.stopPropagation();
            $$('.quantity-option', card).forEach(o => o.classList.remove('active'));
            opt.classList.add('active');
            updateCard(card);
          });
        });

        updateCard(card); // init
      });

      // --- –î–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ –∫–æ—à–∏–∫–∞ + —Ñ—ñ–¥–±–µ–∫ (–±–µ–∑ —Ä–µ–¥—ñ—Ä–µ–∫—Ç—É) ---
      $$('.add-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation(); // –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—Ä–æ–¥—É–∫—Ç—É
          const card = btn.closest('.product-card');
          const sel  = $('.quantity-option.active', card);
          if (!sel) return;

          const qStr  = sel.dataset.quantity;         // "100mg" | "1g" ...
          const price = Number(sel.dataset.price);
          const grams = toGrams(qStr);
          const name = btn.dataset.name || card.dataset.name;
          const sku  = btn.dataset.sku  || card.dataset.sku;

          const cart = getCart();
          cart.push({ name, sku, grams, display: qStr, price, count: 1, unit: 'pack' });
          saveCart(cart);

          popBadge();
          shakeCart();
          showToast(`Added to cart: ${name} ‚Äî ${qStr} ($${price})`);

          // –∫–æ—Ä–æ—Ç–∫–∏–π –∑–≤–æ—Ä–æ—Ç–Ω—ñ–π –∑–≤'—è–∑–æ–∫ –Ω–∞ –∫–Ω–æ–ø—Ü—ñ
          const oldHTML = btn.innerHTML;
          btn.disabled = true;
          btn.textContent = '‚úîÔ∏è Added!';
          setTimeout(() => { btn.disabled = false; btn.innerHTML = oldHTML; }, 1200);
        });
      });

      // --- –ö–ª—ñ–∫ –ø–æ –∫–∞—Ä—Ç—Ü—ñ ‚Üí –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—Ä–æ–¥—É–∫—Ç—É ---
      // –æ—Ä—ñ—î–Ω—Ç—É—î–º–æ—Å—å –Ω–∞ href —É –∫–Ω–æ–ø—Ü—ñ "View Details"
      $$('.product-card.linkable').forEach(card => {
        const detailsLink = $('.view-product', card);
        if (!detailsLink) return;
        const href = detailsLink.getAttribute('href');

        card.addEventListener('click', (e) => {
          // —è–∫—â–æ –∫–ª—ñ–∫–Ω—É–≤—Å—è –±—É–¥—å‚Äë—è–∫–∏–π –µ–ª–µ–º–µ–Ω—Ç, —â–æ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω —ñ–Ω—ñ—Ü—ñ—é–≤–∞—Ç–∏ –ø–µ—Ä–µ—Ö—ñ–¥ ‚Äî —ñ–≥–Ω–æ—Ä—É—î–º–æ
          const target = e.target;
          if (
            target.closest('.quantity-wrap') || // –∫–ª—ñ–∫–∏ –≤ –∑–æ–Ω—ñ –≤–∏–±–æ—Ä—É –∫—ñ–ª—å–∫–æ—Å—Ç—ñ
            target.closest('.add-btn') ||       // –∫–Ω–æ–ø–∫–∞ add to cart
            target.closest('.view-product') ||  // –≤–ª–∞—Å–Ω–µ –ª—ñ–Ω–∫ View Details
            target.closest('.view-cart') ||     // –ª—ñ–Ω–∫ View Cart
            target.tagName === 'A' || target.closest('a') // –±—É–¥—å-—è–∫—ñ —ñ–Ω—à—ñ <a>
          ){
            return;
          }
          if (href) window.location.assign(href);
        });
      });

      // --- —Å—Ç–∞—Ä—Ç–æ–≤–µ —á–∏—Å–ª–æ —É –±–µ–π–¥–∂—ñ ---
      updateCartCount();
    })();
  </script>

  <!-- Tawk.to -->
  <script>
  var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
  (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/68d0f6a789c2a719288962de/1j5o46vrj';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
  })();
  </script>
</body>
</html>
